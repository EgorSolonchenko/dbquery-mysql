<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>DBQuery-MySQL by Jasny</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>DBQuery-MySQL</h1>
          <h2>The best and most complete query builder/parser for MySQL</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/jasny/DBQuery-MySQL/zipball/stable" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/jasny/DBQuery-MySQL/tarball/stable" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/jasny/DBQuery-MySQL" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>MySQL Query builder for PHP</h1>

<p><a href="http://travis-ci.org/jasny/DBQuery-MySQL"><img src="https://secure.travis-ci.org/jasny/DBQuery-MySQL.png?branch=master" alt="Build Status"></a></p>

<p>This library is designed to be the ultimate tool for building, splitting and modifying SQL queries.</p>

<p>Automatic smart quoting helps against SQL injection and problems with reserved keywords.</p>

<p>DBQuery can be used standalone, in conjunction with <a href="http://github.com/jasny/DB-MySQL">Jasny's DB class</a> or in almost any
framework.</p>

<h2>Installation</h2>

<p>DBQuery can be easily installed using <a href="http://getcomposer.org/">composer</a>. Alternatively you can simply download the
.zip and copy the file from the 'src' folder.</p>

<h2>Examples</h2>

<p>An example to simple to be using a query builder</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $query = DBQuery::select()-&gt;columns('id, name')-&gt;from('foo')-&gt;where('active = 1');
    $result = $mysqli-&gt;query($query); // SELECT `id`, `name` FROM `foo` WHERE `active` = 1
</code></pre>

<p>Dynamicly apply paging and filtering on a query</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $query = new DBQuery("SELECT * FROM foo LEFT JOIN bar ON foo.bar_id = bar.id WHERE active = 1 LIMIT 25");
    if (isset($_GET['page'])) $query-&gt;page(3);

    $filter = isset($_POST['filter']) ? $_POST['filter'] : array(); // array('type' =&gt; 'bike', 'price between ? and ?' =&gt; array(10, 20))
    foreach ($filter as $field =&gt; $value) {
        $query-&gt;where($field, $value);
    }

    $result = $mysqli-&gt;query($query); // SELECT * FROM foo LEFT JOIN bar ON foo.bar_id = bar.id WHERE (active = 1) AND (`type` = "bike") AND (`price` between 10 and 20) LIMIT 25 OFFSET 50
</code></pre>

<p>Map fields for an INSERT INTO ... SELECT ... ON DUPLICATE KEY query</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $columns = array(
        'ref' =&gt; 'ref',
        'man' =&gt; 'boy',
        'woman' =&gt; 'girl',
        'amount' =&gt; 'SUM(z.bucks)'
    );

    $select = DBQuery::select()-&gt;columns($columns)-&gt;from('foo')-&gt;innerJoin('z', 'foo.id = z.foo_id')-&gt;groupBy('foo.id');
    $insert = DBQuery::insert()-&gt;into('abc')-&gt;columns(array_keys($columns))-&gt;set($select)-&gt;onDuplicateKeyUpdate();

    $mysql-&gt;query($insert); // INSERT INTO `abc` (`ref`, `man`, `woman`, `amount`)
                            //  SELECT `ref` AS `ref`, `boy` AS `man`, `girl` AS `woman`, SUM(`z`.`bucks`) AS `amount` FROM `foo` LEFT JOIN `z` ON `foo`.`id` = `z`.`foo_id` GROUP BY `foo`.id`
                            //  ON DUPLICATE KEY UPDATE `ref` = VALUES(`ref`), `man` = VALUES(`man`), `woman` = VALUES(`woman`), `amount` = VALUES(`amount`)
</code></pre>

<h2>API documentation (generated)</h2>

<p><a href="http://jasny.github.com/DBQuery-MySQL/docs">http://jasny.github.com/DBQuery-MySQL/docs</a></p>
        </section>

        <footer>
          DBQuery-MySQL is maintained by <a href="http://www.twitter.com/ArnoldDaniels">Arnold Daniels</a> of <a href="http://www.jasny.net">Jasny</a> @ <a href="https://github.com/jasny">GitHub</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-32388850-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>